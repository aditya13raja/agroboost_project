{% extends 'base.html' %}
{% block content %}
<h2>All Products</h2>
<form method="GET" class="mb-3">
  <label>Filter by Role:</label>
  <select name="role" onchange="this.form.submit()" class="form-select w-auto d-inline mx-2">
    <option value="">All</option>
    <option value="SHG" {% if request.GET.role == 'SHG' %}selected{% endif %}>SHG</option>
    <option value="FPG" {% if request.GET.role == 'FPG' %}selected{% endif %}>FPG</option>
  </select>
</form>
<div class="row">
  {% for product in products %}
  <div class="col-md-4">
    <div class="card mb-3">
      <img src="{{ product.image.url }}" class="card-img-top" alt="{{ product.name }}">
      <div class="card-body">
        <h5 class="card-title">{{ product.name }}</h5>
        <p class="card-text">{{ product.description }}</p>
        <p><strong>Price:</strong> â‚¹{{ product.price }}</p>
        <p><small>Uploaded by: {{ product.uploader.username }}</small></p>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
